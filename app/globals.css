@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Coffee-themed color palette */
    --coffee-dark: #4b2e1d;
    --coffee-medium: #d4a373;
    --coffee-light: #eae0d5;
    --coffee-cream: #fff4e6;
    --coffee-darkest: #3c1f0f;

    /* Default light theme */
    --background: 255 244 230;
    --foreground: 75 46 29;
    --card: 255 255 255;
    --card-foreground: 75 46 29;
    --popover: 255 255 255;
    --popover-foreground: 75 46 29;
    --primary: 75 46 29;
    --primary-foreground: 234 224 213;
    --secondary: 234 224 213;
    --secondary-foreground: 75 46 29;
    --muted: 234 224 213;
    --muted-foreground: 75 46 29;
    --accent: 212 163 115;
    --accent-foreground: 75 46 29;
    --destructive: 220 38 38;
    --destructive-foreground: 254 242 242;
    --border: 212 163 115;
    --input: 234 224 213;
    --ring: 212 163 115;
    --radius: 0.75rem;
  }

  html {
    scroll-behavior: smooth;
    /* Ensure proper scroll context for Framer Motion */
    position: relative;
    height: 100%;
  }
  
  body {
    @apply bg-coffee-cream text-coffee-dark;
    /* Ensure proper positioning context for scroll animations */
    position: relative;
    min-height: 100%;
    /* Optimize for smooth animations */
    will-change: scroll-position;
  }

  /* Ensure main container has proper positioning context */
  #main {
    position: relative;
    min-height: 100vh;
  }
}

@layer components {
  .container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Performance optimizations for animations */
  .animate-optimized {
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  /* Hide scrollbars for better mobile experience */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }
}

/* Hide Next.js branding and indicators */
#__next-build-watcher,
.nextjs-toast-errors,
[data-nextjs-toast],
[data-nextjs-dialog],
[data-nextjs-portal] {
  display: none !important;
}

/* Hide any remaining Next.js development indicators */
[class*="nextjs"],
[class*="__next"] {
  display: none !important;
}

/* Smooth scrolling optimizations */
* {
  scroll-behavior: smooth;
}

/* iOS-specific image loading fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  img {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Fix for iOS image loading issues */
  .next-image-wrapper {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  /* Ensure images load properly on iOS */
  img[src*=".jpg"], img[src*=".jpeg"], img[src*=".png"] {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* Force hardware acceleration for images on mobile */
@media (max-width: 768px) {
  img {
    will-change: transform;
    transform: translateZ(0);
  }
}

/* Universal video compatibility for all platforms */
video {
  /* Force hardware acceleration */
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  
  /* Ensure proper rendering on all browsers */
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  -o-transform: translateZ(0);
  
  /* Prevent video controls from interfering */
  -webkit-media-controls {
    display: none !important;
  }
  
  /* iOS Safari specific fixes */
  -webkit-playsinline: true;
  -webkit-video-playable-inline: true;
}

/* Cross-browser video compatibility */
@supports (-webkit-appearance: none) {
  /* WebKit browsers (Safari, Chrome) */
  video {
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
  }
}

@supports (-moz-appearance: none) {
  /* Firefox */
  video {
    -moz-transform: translateZ(0);
    -moz-backface-visibility: hidden;
  }
}

@supports (-ms-ime-align: auto) {
  /* Internet Explorer/Edge */
  video {
    -ms-transform: translateZ(0);
    -ms-backface-visibility: hidden;
  }
}

/* Mobile-specific video optimizations */
@media (max-width: 768px) {
  video {
    /* Ensure videos work on mobile devices */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    
    /* Prevent mobile browser interference */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
}

/* iOS Safari specific video fixes */
@supports (-webkit-touch-callout: none) {
  video {
    /* iOS Safari video compatibility */
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    
    /* Force inline playback */
    -webkit-playsinline: true;
    -webkit-video-playable-inline: true;
    
    /* Prevent fullscreen on iOS */
    -webkit-presentation-mode: inline;
  }
}

/* Android/Chrome specific video fixes */
@supports (-webkit-appearance: none) and (display: flex) {
  video {
    /* Android Chrome optimizations */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    
    /* Ensure proper playback */
    -webkit-playsinline: true;
  }
}

/* Mobile video autoplay enforcement */
@media (max-width: 768px) {
  video {
    /* Force autoplay on mobile */
    -webkit-playsinline: true !important;
    playsinline: true !important;
    
    /* Prevent mobile browser interference */
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    -webkit-tap-highlight-color: transparent !important;
    
    /* Ensure video starts playing */
    autoplay: true !important;
    muted: true !important;
    
    /* Hardware acceleration */
    will-change: transform !important;
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
  }
}

/* iOS Safari autoplay enforcement */
@supports (-webkit-touch-callout: none) {
  video {
    /* Force iOS autoplay */
    -webkit-playsinline: true !important;
    -webkit-video-playable-inline: true !important;
    -webkit-presentation-mode: inline !important;
    
    /* Prevent fullscreen on iOS */
    -webkit-full-screen: none !important;
    
    /* Ensure autoplay works */
    autoplay: true !important;
    muted: true !important;
  }
}

/* Android autoplay enforcement */
@supports (-webkit-appearance: none) and (display: flex) {
  video {
    /* Force Android autoplay */
    -webkit-playsinline: true !important;
    playsinline: true !important;
    
    /* Ensure video starts */
    autoplay: true !important;
    muted: true !important;
  }
}
